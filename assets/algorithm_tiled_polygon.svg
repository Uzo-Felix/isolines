<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1500 1000" width="1500" height="1000">
  <defs>
    <style>
      .title { font-size: 26px; font-weight: bold; fill: #00d4ff; }
      .subtitle { font-size: 14px; fill: #aaa; }
      .section-title { font-size: 15px; font-weight: bold; fill: #00d4ff; }
      .step-label { font-size: 12px; fill: #ccc; }
      .tile-label { font-size: 11px; fill: #aaa; }
      .segment { stroke: #00d4ff; stroke-width: 2; }
      .segment-thick { stroke: #00d4ff; stroke-width: 2.5; }
      .endpoint { fill: #00ff00; }
      .polygon-fill { fill: #4a6a5a; stroke: #90ee90; stroke-width: 2; opacity: 0.7; }
      .polygon-open { fill: none; stroke: #ff6b6b; stroke-width: 2; stroke-dasharray: 2,2; }
      .forced-line { stroke: #ff9900; stroke-width: 2; stroke-dasharray: 3,3; }
      .natural-closure { stroke: #90ee90; stroke-width: 2.5; }
      .tile-core { fill: #1a2a3a; stroke: #333; stroke-width: 2; }
      .box { fill: #1a1a2e; stroke: #333; stroke-width: 1; }
      .highlight-box { fill: #3a3a1a; stroke: #ffaa00; stroke-width: 1.5; }
      .warning-box { fill: #3a1a1a; stroke: #ff6b6b; stroke-width: 1.5; }
      .success-box { fill: #1a3a1a; stroke: #90ee90; stroke-width: 1.5; }
      .arrow { stroke: #ffa500; stroke-width: 1.5; marker-end: url(#arrowhead); }
      .grid { stroke: #333; stroke-width: 0.5; }
      .artificial { fill: #ffaa00; opacity: 0.3; }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#ffa500"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="1500" height="1000" fill="#0f0f1e"/>

  <!-- Title -->
  <text x="750" y="35" text-anchor="middle" class="title">Approach 2: Polygon-Based Tile Processing</text>
  <text x="750" y="60" text-anchor="middle" class="subtitle">Force closure of all segments, creating Polygon geometries</text>

  <!-- Phase 1: Process Tile -->
  <g id="phase1">
    <text x="50" y="95" class="section-title">Phase 1: Apply CONREC &amp; Build Paths</text>
    
    <!-- Tile -->
    <rect x="50" y="120" width="180" height="180" class="tile-core"/>
    <g class="grid" stroke="#333" stroke-width="0.5">
      <line x1="50" y1="160" x2="230" y2="160"/>
      <line x1="50" y1="200" x2="230" y2="200"/>
      <line x1="90" y1="120" x2="90" y2="300"/>
      <line x1="130" y1="120" x2="130" y2="300"/>
      <line x1="170" y1="120" x2="170" y2="300"/>
      <line x1="210" y1="120" x2="210" y2="300"/>
    </g>
    
    <!-- Segments -->
    <line x1="70" y1="160" x2="110" y2="140" class="segment-thick"/>
    <line x1="115" y1="145" x2="170" y2="190" class="segment-thick"/>
    <line x1="175" y1="200" x2="220" y2="270" class="segment-thick"/>
    
    <!-- End points -->
    <circle cx="70" cy="160" r="2.5" class="endpoint"/>
    <circle cx="110" cy="140" r="2.5" class="endpoint"/>
    <circle cx="220" cy="270" r="2.5" class="endpoint"/>
    
    <text x="140" y="320" text-anchor="middle" class="tile-label">CONREC generates</text>
    <text x="140" y="335" text-anchor="middle" class="tile-label">3 disconnected segments</text>
  </g>

  <!-- Phase 2: Identify Open Paths -->
  <g id="phase2">
    <text x="320" y="95" class="section-title">Phase 2: Identify Open-Ended Paths</text>
    
    <!-- Tile -->
    <rect x="300" y="120" width="180" height="180" class="tile-core"/>
    <g class="grid" stroke="#333" stroke-width="0.5">
      <line x1="300" y1="160" x2="480" y2="160"/>
      <line x1="300" y1="200" x2="480" y2="200"/>
      <line x1="340" y1="120" x2="340" y2="300"/>
      <line x1="380" y1="120" x2="380" y2="300"/>
      <line x1="420" y1="120" x2="420" y2="300"/>
      <line x1="460" y1="120" x2="460" y2="300"/>
    </g>
    
    <!-- Segments as connected path -->
    <polyline points="320,160 360,140 390,190 430,270" fill="none" class="segment-thick"/>
    
    <!-- Endpoints marked -->
    <circle cx="320" cy="160" r="3.5" class="endpoint"/>
    <circle cx="430" cy="270" r="3.5" class="endpoint"/>
    <text x="310" y="185" class="tile-label" style="fill: #00ff00;">START</text>
    <text x="445" y="280" class="tile-label" style="fill: #ff6b6b;">END</text>
    
    <!-- Distance shown -->
    <line x1="320" y1="160" x2="430" y2="270" stroke="#999" stroke-width="1" stroke-dasharray="3,3"/>
    <text x="350" y="200" class="tile-label" style="fill: #999;">open path</text>
    
    <text x="390" y="320" text-anchor="middle" class="tile-label">Path identified as</text>
    <text x="390" y="335" text-anchor="middle" class="tile-label">OPEN (endpoints ≠)</text>
  </g>

  <!-- Phase 3: Force Closure -->
  <g id="phase3">
    <text x="600" y="95" class="section-title">Phase 3: Force Closure</text>
    
    <!-- Tile -->
    <rect x="580" y="120" width="200" height="180" class="tile-core"/>
    <g class="grid" stroke="#333" stroke-width="0.5">
      <line x1="580" y1="160" x2="780" y2="160"/>
      <line x1="580" y1="200" x2="780" y2="200"/>
      <line x1="620" y1="120" x2="620" y2="300"/>
      <line x1="660" y1="120" x2="660" y2="300"/>
      <line x1="700" y1="120" x2="700" y2="300"/>
      <line x1="740" y1="120" x2="740" y2="300"/>
    </g>
    
    <!-- Original path -->
    <polyline points="600,160 640,140 670,190 710,270" fill="none" class="segment-thick" stroke-width="2.5"/>
    
    <!-- Forced closure -->
    <line x1="710" y1="270" x2="600" y2="160" class="forced-line" stroke-width="3"/>
    <text x="620" y="225" class="tile-label" style="fill: #ff9900;">FORCED</text>
    <text x="620" y="240" class="tile-label" style="fill: #ff9900;">CLOSURE</text>
    
    <!-- Endpoints -->
    <circle cx="600" cy="160" r="3.5" class="endpoint"/>
    <circle cx="710" cy="270" r="3.5" class="endpoint"/>
    
    <text x="680" y="320" text-anchor="middle" class="tile-label">Straight line connects</text>
    <text x="680" y="335" text-anchor="middle" class="tile-label">start and end points</text>
  </g>

  <!-- Phase 4: Create Polygon -->
  <g id="phase4">
    <text x="900" y="95" class="section-title">Phase 4: Create Polygon Geometry</text>
    
    <!-- Tile -->
    <rect x="880" y="120" width="200" height="180" class="tile-core"/>
    
    <!-- Closed polygon -->
    <polygon points="920,160 960,140 990,190 1030,270 920,160" class="polygon-fill"/>
    <polyline points="920,160 960,140 990,190 1030,270 920,160" fill="none" class="natural-closure" stroke-width="2"/>
    
    <!-- Forced closure segment highlighted -->
    <line x1="1030" y1="270" x2="920" y2="160" stroke="#ff9900" stroke-width="3" stroke-dasharray="2,2"/>
    
    <text x="980" y="320" text-anchor="middle" class="tile-label">Valid Polygon</text>
    <text x="980" y="335" text-anchor="middle" class="tile-label">(closed, fillable)</text>
  </g>

  <!-- Full grid example -->
  <g id="full-example">
    <text x="50" y="410" class="section-title">Full Grid Example: 4 Tiles</text>
    
    <!-- 4 tile grid -->
    <!-- Tile 1 (top-left) -->
    <rect x="50" y="450" width="110" height="110" class="tile-core"/>
    <polygon points="70,480 100,470 120,510 90,540 70,480" class="polygon-fill"/>
    <text x="105" y="570" text-anchor="middle" class="tile-label">Tile 1</text>
    
    <!-- Tile 2 (top-right) -->
    <rect x="170" y="450" width="110" height="110" class="tile-core"/>
    <polygon points="190,480 220,475 240,520 210,545 190,480" class="polygon-fill"/>
    <text x="225" y="570" text-anchor="middle" class="tile-label">Tile 2</text>
    
    <!-- Tile 3 (bottom-left) -->
    <rect x="50" y="570" width="110" height="110" class="tile-core"/>
    <polygon points="70,590 105,600 120,640 85,655 70,590" class="polygon-fill"/>
    <text x="105" y="690" text-anchor="middle" class="tile-label">Tile 3</text>
    
    <!-- Tile 4 (bottom-right) -->
    <rect x="170" y="570" width="110" height="110" class="tile-core"/>
    <polygon points="190,595 225,590 245,635 210,655 190,595" class="polygon-fill"/>
    <text x="225" y="690" text-anchor="middle" class="tile-label">Tile 4</text>
    
    <!-- Boundaries -->
    <line x1="160" y1="450" x2="160" y2="680" stroke="#ffa500" stroke-width="1.5" stroke-dasharray="3,3"/>
    <line x1="50" y1="560" x2="280" y2="560" stroke="#ffa500" stroke-width="1.5" stroke-dasharray="3,3"/>
    
    <!-- Problem annotation -->
    <rect x="320" y="480" width="220" height="180" class="warning-box"/>
    <text x="430" y="510" text-anchor="middle" class="step-label" style="fill: #ff6b6b;">Problem Illustration</text>
    
    <text x="335" y="535" class="tile-label" style="fill: #ff6b6b; font-weight: bold;">Meteorological Error:</text>
    <text x="335" y="553" class="tile-label">A low-pressure system</text>
    <text x="335" y="568" class="tile-label">spanning all 4 tiles should</text>
    <text x="335" y="583" class="tile-label">be ONE continuous region</text>
    
    <text x="335" y="608" class="tile-label" style="fill: #ff6b6b;">Instead generates:</text>
    <text x="335" y="623" class="tile-label" style="fill: #ff6b6b;">4 separate isolated</text>
    <text x="335" y="638" class="tile-label" style="fill: #ff6b6b;">polygons at boundaries</text>
  </g>

  <!-- Algorithm and Results -->
  <g id="algorithm-results">
    <text x="50" y="750" class="section-title">Algorithm Strategy &amp; Results</text>
    
    <!-- Algorithm -->
    <rect x="20" y="780" width="470" height="200" class="box"/>
    <text x="255" y="810" text-anchor="middle" class="step-label" style="fill: #00d4ff;">Algorithm Steps</text>
    
    <text x="35" y="840" class="tile-label">1. Apply CONREC to generate segments</text>
    <text x="35" y="858" class="tile-label">2. Connect segments into paths</text>
    <text x="35" y="876" class="tile-label">3. For each path:</text>
    <text x="50" y="894" class="tile-label">   if NOT naturally closed:</text>
    <text x="65" y="912" class="tile-label">      → Connect endpoints with</text>
    <text x="70" y="930" class="tile-label">        straight line (forced closure)</text>
    <text x="35" y="948" class="tile-label">4. Create Polygon from closed path</text>
    
    <!-- Results -->
    <rect x="510" y="780" width="470" height="200" class="box"/>
    <text x="745" y="810" text-anchor="middle" class="step-label" style="fill: #00d4ff;">Performance Results</text>
    
    <rect x="530" y="840" width="430" height="140" fill="#1a2a2e" stroke="#333" stroke-width="1" rx="3"/>
    <text x="745" y="860" text-anchor="middle" class="tile-label" style="fill: #ffaa00; font-weight: bold;">Boundary Continuity: 100%*</text>
    <text x="545" y="885" class="tile-label">*Achieved through forced closure</text>
    
    <text x="545" y="908" class="tile-label">Processing Time: 0.54s (FASTEST)</text>
    <text x="545" y="926" class="tile-label">Visual Artifacts: 53 (WORST)</text>
    <text x="545" y="944" class="tile-label">Features: 95 (vs. 52 reference)</text>
    <text x="545" y="962" class="tile-label">Feature Inflation: 82% more than reference</text>
    
    <!-- Quality assessment -->
    <rect x="1000" y="780" width="450" height="200" class="box"/>
    <text x="1225" y="810" text-anchor="middle" class="step-label" style="fill: #00d4ff;">Quality Assessment</text>
    
    <rect x="1020" y="840" width="410" height="140" fill="#1a2a2e" stroke="#333" stroke-width="1" rx="3"/>
    <text x="1225" y="860" text-anchor="middle" class="tile-label" style="fill: #ff6b6b; font-weight: bold;">Topologically INCORRECT</text>
    <text x="1035" y="885" class="tile-label">✗ Creates artificial boundaries</text>
    <text x="1035" y="903" class="tile-label">✗ Produces sharp angular features</text>
    <text x="1035" y="921" class="tile-label">✗ Misrepresents continuous systems</text>
    <text x="1035" y="939" class="tile-label">✗ Metric optimized, not reality</text>
    <text x="1035" y="957" class="tile-label">✗ Unsuitable for scientific analysis</text>
  </g>

  <!-- Why this fails -->
  <g id="why-fails">
    <text x="50" y="1020" class="section-title" style="font-size: 13px;">Why "100% Continuity" is Misleading</text>
    
    <rect x="20" y="1040" width="700" height="80" class="warning-box"/>
    <text x="370" y="1060" text-anchor="middle" class="tile-label" style="fill: #ff6b6b; font-weight: bold;">High Metric Score ≠ Correctness</text>
    <text x="35" y="1085" class="tile-label">Perfect continuity metric achieved through forced closure, BUT violates topological correctness:</text>
    <text x="35" y="1103" class="tile-label">Creates false topology that doesn't exist in the data, artificially splits continuous systems, and produces unnatural geometry.</text>
    
    <rect x="740" y="1040" width="700" height="80" class="success-box"/>
    <text x="1090" y="1060" text-anchor="middle" class="tile-label" style="fill: #90ee90; font-weight: bold;">Lesson: Metrics Must Align with Goals</text>
    <text x="755" y="1085" class="tile-label">Continuity % alone is insufficient. Must also measure geometric accuracy and topological correctness.</text>
    <text x="755" y="1103" class="tile-label">A "perfect" metric with "terrible" results indicates misaligned objectives, not successful algorithm.</text>
  </g>
</svg>
