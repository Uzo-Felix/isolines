<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1500 1050" width="1500" height="1050">
  <defs>
    <style>
      .title { font-size: 26px; font-weight: bold; fill: #00d4ff; }
      .subtitle { font-size: 14px; fill: #aaa; }
      .section-title { font-size: 15px; font-weight: bold; fill: #00d4ff; }
      .step-label { font-size: 12px; fill: #ccc; }
      .tile-label { font-size: 11px; fill: #aaa; }
      .segment { stroke: #00d4ff; stroke-width: 2; }
      .segment-thick { stroke: #00d4ff; stroke-width: 2.5; }
      .endpoint { fill: #00ff00; }
      .endpoint-matched { fill: #90ee90; stroke: #90ee90; stroke-width: 2; }
      .strip-data { fill: #ffaa00; opacity: 0.3; }
      .tile-core { fill: #1a2a3a; stroke: #333; stroke-width: 2; }
      .tile-stripped { fill: #1a3a3a; stroke: #00d4ff; stroke-width: 1.5; stroke-dasharray: 3,3; }
      .boundary { stroke: #ffa500; stroke-width: 2; stroke-dasharray: 4,4; }
      .merged { stroke: #90ee90; stroke-width: 2.5; }
      .box { fill: #1a1a2e; stroke: #333; stroke-width: 1; }
      .highlight-box { fill: #2a3a2a; stroke: #90ee90; stroke-width: 1.5; }
      .arrow { stroke: #ffa500; stroke-width: 1.5; marker-end: url(#arrowhead); }
      .grid { stroke: #333; stroke-width: 0.5; }
      .expansion-arrow { stroke: #ffaa00; stroke-width: 2; marker-end: url(#arrowhead-orange); }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#ffa500"/>
    </marker>
    <marker id="arrowhead-orange" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#ffaa00"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="1500" height="1050" fill="#0f0f1e"/>

  <!-- Title -->
  <text x="750" y="35" text-anchor="middle" class="title">Approach 3: Strip-Based Tile Processing</text>
  <text x="750" y="60" text-anchor="middle" class="subtitle">Process tiles with identical boundary data from neighbors</text>

  <!-- Phase 1: Extract Strips from Neighbors -->
  <g id="phase1">
    <text x="50" y="95" class="section-title">Phase 1: Extract &amp; Attach Boundary Strips</text>
    
    <!-- Central tile -->
    <g id="central">
      <rect x="80" y="130" width="140" height="140" class="tile-core"/>
      <g class="grid">
        <line x1="80" y1="160" x2="220" y2="160"/>
        <line x1="80" y1="190" x2="220" y2="190"/>
        <line x1="110" y1="130" x2="110" y2="270"/>
        <line x1="140" y1="130" x2="140" y2="270"/>
        <line x1="170" y1="130" x2="170" y2="270"/>
        <line x1="200" y1="130" x2="200" y2="270"/>
      </g>
      <text x="150" y="210" text-anchor="middle" class="step-label">Core Tile</text>
      <text x="150" y="225" text-anchor="middle" class="tile-label">(64×64)</text>
    </g>
    
    <!-- Top neighbor strip -->
    <g id="top-strip">
      <rect x="80" y="100" width="140" height="30" class="strip-data"/>
      <line x1="80" y1="100" x2="220" y2="100" stroke="#ffaa00" stroke-width="1.5"/>
      <line x1="80" y1="130" x2="220" y2="130" stroke="#ffaa00" stroke-width="1.5"/>
      <text x="230" y="120" class="tile-label" style="fill: #ffaa00;">↑ 2px strip from</text>
      <text x="230" y="135" class="tile-label" style="fill: #ffaa00;">  neighbor above</text>
    </g>
    
    <!-- Bottom neighbor strip -->
    <g id="bottom-strip">
      <rect x="80" y="270" width="140" height="30" class="strip-data"/>
      <line x1="80" y1="270" x2="220" y2="270" stroke="#ffaa00" stroke-width="1.5"/>
      <line x1="80" y1="300" x2="220" y2="300" stroke="#ffaa00" stroke-width="1.5"/>
      <text x="230" y="290" class="tile-label" style="fill: #ffaa00;">↓ 2px strip from</text>
      <text x="230" y="305" class="tile-label" style="fill: #ffaa00;">  neighbor below</text>
    </g>
    
    <!-- Left neighbor strip -->
    <g id="left-strip">
      <rect x="50" y="130" width="30" height="140" class="strip-data"/>
      <line x1="50" y1="130" x2="50" y2="270" stroke="#ffaa00" stroke-width="1.5"/>
      <line x1="80" y1="130" x2="80" y2="270" stroke="#ffaa00" stroke-width="1.5"/>
      <text x="20" y="210" text-anchor="end" class="tile-label" style="fill: #ffaa00;">← 2px</text>
    </g>
    
    <!-- Right neighbor strip -->
    <g id="right-strip">
      <rect x="220" y="130" width="30" height="140" class="strip-data"/>
      <line x1="220" y1="130" x2="220" y2="270" stroke="#ffaa00" stroke-width="1.5"/>
      <line x1="250" y1="130" x2="250" y2="270" stroke="#ffaa00" stroke-width="1.5"/>
      <text x="280" y="210" class="tile-label" style="fill: #ffaa00;">2px →</text>
    </g>
    
    <!-- Result box -->
    <rect x="380" y="130" width="200" height="170" class="highlight-box"/>
    <text x="480" y="160" text-anchor="middle" class="step-label" style="fill: #00d4ff;">Expanded Tile</text>
    <text x="480" y="180" text-anchor="middle" class="step-label" style="fill: #00d4ff;">for Processing</text>
    
    <!-- Draw expanded tile -->
    <rect x="400" y="195" width="160" height="100" fill="#2a3a3a" stroke="#00d4ff" stroke-width="2"/>
    <rect x="395" y="190" width="170" height="110" fill="none" stroke="#ffaa00" stroke-width="1.5" stroke-dasharray="2,2"/>
    
    <!-- Strips shown as colored regions -->
    <rect x="395" y="190" width="170" height="5" fill="#ffaa00" opacity="0.5"/>
    <rect x="395" y="295" width="170" height="5" fill="#ffaa00" opacity="0.5"/>
    <rect x="395" y="190" width="5" height="115" fill="#ffaa00" opacity="0.5"/>
    <rect x="560" y="190" width="5" height="115" fill="#ffaa00" opacity="0.5"/>
    
    <text x="480" y="285" text-anchor="middle" class="tile-label">(68×68) with strips</text>
  </g>

  <!-- Phase 2: Segment Generation -->
  <g id="phase2">
    <text x="50" y="370" class="section-title">Phase 2: Apply CONREC to Expanded Tile</text>
    
    <!-- Expanded tile -->
    <rect x="50" y="400" width="200" height="180" class="tile-stripped"/>
    <g class="grid" stroke="#333" stroke-width="0.5">
      <line x1="50" y1="440" x2="250" y2="440"/>
      <line x1="50" y1="480" x2="250" y2="480"/>
      <line x1="90" y1="400" x2="90" y2="580"/>
      <line x1="130" y1="400" x2="130" y2="580"/>
      <line x1="170" y1="400" x2="170" y2="580"/>
      <line x1="210" y1="400" x2="210" y2="580"/>
    </g>
    
    <!-- Segments generated -->
    <line x1="70" y1="440" x2="120" y2="430" class="segment-thick"/>
    <line x1="125" y1="435" x2="180" y2="480" class="segment-thick"/>
    <line x1="185" y1="490" x2="230" y2="550" class="segment-thick"/>
    
    <!-- Boundary cells highlighted -->
    <rect x="50" y="400" width="40" height="40" fill="none" stroke="#ffaa00" stroke-width="2"/>
    <rect x="210" y="400" width="40" height="40" fill="none" stroke="#ffaa00" stroke-width="2"/>
    <rect x="50" y="540" width="40" height="40" fill="none" stroke="#ffaa00" stroke-width="2"/>
    <rect x="210" y="540" width="40" height="40" fill="none" stroke="#ffaa00" stroke-width="2"/>
    
    <text x="150" y="610" text-anchor="middle" class="tile-label">CONREC processes boundary</text>
    <text x="150" y="625" text-anchor="middle" class="tile-label">cells with complete 4-corner</text>
    <text x="150" y="640" text-anchor="middle" class="tile-label">data from both tile &amp; neighbors</text>
  </g>

  <!-- Phase 3: Clipping to Tile Bounds -->
  <g id="phase3">
    <text x="350" y="370" class="section-title">Phase 3: Clip Segments to Tile Bounds</text>
    
    <!-- Expanded tile with segments -->
    <rect x="320" y="400" width="200" height="180" class="tile-stripped"/>
    
    <!-- Extended segments -->
    <line x1="340" y1="440" x2="480" y2="420" class="segment" opacity="0.6" stroke="#666"/>
    <line x1="340" y1="460" x2="480" y2="500" class="segment" opacity="0.6" stroke="#666"/>
    <line x1="340" y1="480" x2="480" y2="560" class="segment" opacity="0.6" stroke="#666"/>
    
    <!-- Core tile boundary -->
    <rect x="350" y="420" width="140" height="140" fill="none" stroke="#00ff00" stroke-width="2.5"/>
    
    <!-- Clipped segments within bounds -->
    <line x1="370" y1="440" x2="450" y2="430" class="segment-thick"/>
    <line x1="380" y1="460" x2="470" y2="500" class="segment-thick"/>
    <line x1="385" y1="480" x2="480" y2="540" class="segment-thick"/>
    
    <text x="420" y="610" text-anchor="middle" class="tile-label">Segments clipped back to</text>
    <text x="420" y="625" text-anchor="middle" class="tile-label">original tile bounds</text>
    <text x="420" y="640" text-anchor="middle" class="tile-label">boundary cells intact</text>
  </g>

  <!-- Phase 4: Build LineStrings &amp; Store -->
  <g id="phase4">
    <text x="700" y="370" class="section-title">Phase 4: Build LineStrings &amp; Store</text>
    
    <!-- Tile processing -->
    <rect x="670" y="400" width="200" height="180" class="tile-core"/>
    <g class="grid" stroke="#333" stroke-width="0.5">
      <line x1="670" y1="440" x2="870" y2="440"/>
      <line x1="670" y1="480" x2="870" y2="480"/>
      <line x1="710" y1="400" x2="710" y2="580"/>
      <line x1="750" y1="400" x2="750" y2="580"/>
      <line x1="790" y1="400" x2="790" y2="580"/>
      <line x1="830" y1="400" x2="830" y2="580"/>
    </g>
    
    <!-- Connected segments forming LineStrings -->
    <polyline points="690,440 730,430 770,480 810,560" fill="none" class="merged" stroke-width="2.5"/>
    <circle cx="690" cy="440" r="2.5" class="endpoint"/>
    <circle cx="810" cy="560" r="2.5" class="endpoint"/>
    
    <!-- Storage annotation -->
    <rect x="680" y="600" width="180" height="50" fill="#1a2a2e" stroke="#333" stroke-width="1" rx="3"/>
    <text x="770" y="620" text-anchor="middle" class="tile-label" style="fill: #00d4ff;">Store LineString</text>
    <text x="770" y="635" text-anchor="middle" class="tile-label">&amp; boundary coords</text>
  </g>

  <!-- Phase 5: Merge with Neighbors -->
  <g id="phase5">
    <text x="1050" y="370" class="section-title">Phase 5: Merge with Neighbors</text>
    
    <!-- Two tiles at boundary -->
    <rect x="1020" y="400" width="130" height="180" class="tile-core"/>
    <rect x="1150" y="400" width="130" height="180" class="tile-core"/>
    
    <!-- Boundary -->
    <line x1="1150" y1="400" x2="1150" y2="580" stroke="#ffa500" stroke-width="2" stroke-dasharray="3,3"/>
    
    <!-- Segments across boundary -->
    <line x1="1060" y1="440" x2="1130" y2="450" class="segment-thick"/>
    <line x1="1155" y1="445" x2="1240" y2="480" class="segment-thick"/>
    
    <!-- Endpoints -->
    <circle cx="1130" cy="450" r="3" class="endpoint-matched"/>
    <circle cx="1155" cy="445" r="3" class="endpoint-matched"/>
    
    <!-- Connection -->
    <line x1="1130" y1="450" x2="1155" y2="445" stroke="#90ee90" stroke-width="2.5" stroke-dasharray="2,2"/>
    <text x="1180" y="465" class="tile-label" style="fill: #90ee90;">within ε</text>
    
    <!-- Merged result -->
    <polyline points="1060,440 1130,450 1155,445 1240,480" fill="none" class="merged" stroke-width="2.5"/>
    
    <text x="1215" y="610" text-anchor="middle" class="tile-label">Endpoints match,</text>
    <text x="1215" y="625" text-anchor="middle" class="tile-label">LineStrings merged</text>
  </g>

  <!-- Algorithm and Results -->
  <g id="algorithm-results">
    <text x="50" y="750" class="section-title">Algorithm Key Features &amp; Results</text>
    
    <!-- Key Features -->
    <rect x="20" y="780" width="470" height="250" class="box"/>
    <text x="255" y="805" text-anchor="middle" class="step-label" style="fill: #00d4ff;">Key Algorithm Features</text>
    
    <text x="35" y="835" class="tile-label">✓ Identical boundary data:</text>
    <text x="50" y="850" class="tile-label">  Both tile-A and tile-B use</text>
    <text x="50" y="865" class="tile-label">  same raw data for cells</text>
    <text x="50" y="880" class="tile-label">  at their shared boundary</text>
    
    <text x="35" y="905" class="tile-label">✓ Mathematical consistency:</text>
    <text x="50" y="920" class="tile-label">  CONREC generates identical</text>
    <text x="50" y="935" class="tile-label">  segments for boundary cells</text>
    <text x="50" y="950" class="tile-label">  regardless of processing order</text>
    
    <text x="35" y="975" class="tile-label">✓ Overlap-based merging:</text>
    <text x="50" y="990" class="tile-label">  Geometries within ε of each</text>
    <text x="50" y="1005" class="tile-label">  other are merged post-CONREC</text>
    
    <!-- Performance metrics -->
    <rect x="510" y="780" width="470" height="250" class="box"/>
    <text x="745" y="805" text-anchor="middle" class="step-label" style="fill: #00d4ff;">Experimental Results</text>
    
    <rect x="530" y="830" width="430" height="190" fill="#1a2a2e" stroke="#333" stroke-width="1" rx="3"/>
    <text x="745" y="855" text-anchor="middle" class="tile-label" style="fill: #90ee90; font-weight: bold;">Boundary Continuity: 92.8%</text>
    <text x="545" y="880" class="tile-label">• Highest continuity among direct</text>
    <text x="545" y="895" class="tile-label">  tile approaches</text>
    <text x="545" y="915" class="tile-label">Visual Artifacts: 13 (minimal)</text>
    <text x="545" y="930" class="tile-label">• Fewest artifacts among all approaches</text>
    
    <text x="545" y="955" class="tile-label">Processing Time: 0.59s</text>
    <text x="545" y="970" class="tile-label">• Slightly slower than LineString (0.60s)</text>
    <text x="545" y="985" class="tile-label">• Still interactive for browser</text>
    <text x="545" y="1000" class="tile-label">Feature Count: 118 vs 52 (ref)</text>
  </g>

  <!-- Bottom: Trade-offs -->
  <g id="tradeoffs">
    <text x="1050" y="750" class="section-title">Trade-offs</text>
    
    <!-- Advantages -->
    <rect x="1020" y="780" width="250" height="120" fill="#1a2a1a" stroke="#90ee90" stroke-width="1.5" rx="3"/>
    <text x="1145" y="805" text-anchor="middle" class="step-label" style="fill: #90ee90;">Advantages</text>
    <text x="1035" y="830" class="tile-label">✓ Highest continuity (92.8%)</text>
    <text x="1035" y="848" class="tile-label">✓ Minimal artifacts (13)</text>
    <text x="1035" y="866" class="tile-label">✓ Mathematically consistent</text>
    <text x="1035" y="884" class="tile-label">✓ Natural polygon closure</text>
    
    <!-- Disadvantages -->
    <rect x="1020" y="910" width="250" height="110" fill="#2a1a1a" stroke="#ff6b6b" stroke-width="1.5" rx="3"/>
    <text x="1145" y="935" text-anchor="middle" class="step-label" style="fill: #ff6b6b;">Disadvantages</text>
    <text x="1035" y="960" class="tile-label">✗ Not perfect (92.8%)</text>
    <text x="1035" y="978" class="tile-label">✗ Memory overhead for strips</text>
  </g>
</svg>
